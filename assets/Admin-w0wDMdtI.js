import{j as e,d as h}from"./index-CZpKUOUo.js";import{r as c,L as b}from"./vendor-DPpvCZNn.js";import{m as E,n as B,u as V,f as j,p as L}from"./firebase-mGLr8wx-.js";import{d as T,E as v,f as z,D as S,g as F,h as q,i as M,j as N,P,S as $,M as U,k as O,l as H,m as Q}from"./icons-oDxEi2-m.js";const X=()=>{const[o,x]=c.useState([]),[w,k]=c.useState(!0),[l,R]=c.useState("todos"),[m,D]=c.useState(""),[a,I]=c.useState({totalImoveis:0,imoveisAtivos:0,imoveisVenda:0,imoveisAluguel:0,totalVisualizacoes:0,cadastradosUltimos30Dias:0,semFoto:0,emDestaque:0,valorMedioVenda:0}),C=async()=>{try{const t=(await E(B(h,"imoveis"))).docs.map(s=>({id:s.id,...s.data()}));x(t),f(t)}catch(i){console.error("Erro ao buscar im√≥veis:",i)}finally{k(!1)}},f=i=>{const t=new Date,s=new Date(t.setDate(t.getDate()-30)),d={totalImoveis:i.length,imoveisAtivos:i.filter(r=>r.ativo!==!1).length,imoveisVenda:i.filter(r=>r.tipo==="Venda"||r.tipo==="Ambos").length,imoveisAluguel:i.filter(r=>r.tipo==="Aluguel"||r.tipo==="Ambos").length,totalVisualizacoes:i.reduce((r,p)=>r+(p.visualizacoes||0),0),cadastradosUltimos30Dias:i.filter(r=>r.criadoEm?(r.criadoEm.toDate?r.criadoEm.toDate():new Date(r.criadoEm))>=s:!1).length,semFoto:i.filter(r=>!r.imagens||r.imagens.length===0).length,emDestaque:i.filter(r=>r.destaque).length,valorMedioVenda:Math.round(i.filter(r=>r.tipo==="Venda"||r.tipo==="Ambos").reduce((r,p)=>r+p.preco,0)/i.filter(r=>r.tipo==="Venda"||r.tipo==="Ambos").length||0)};I(d)};c.useEffect(()=>{C()},[]);const A=async i=>{if(window.confirm("Tem certeza que deseja excluir? Essa a√ß√£o √© permanente."))try{await L(j(h,"imoveis",i));const s=o.filter(d=>d.id!==i);x(s),f(s)}catch(s){console.error("Erro ao excluir:",s),alert("Erro ao excluir.")}},W=async(i,t)=>{try{const s=!t;await V(j(h,"imoveis",i),{ativo:s});const d=o.map(r=>r.id===i?{...r,ativo:s}:r);x(d),f(d)}catch(s){console.error("Erro ao atualizar status:",s)}},g=o.filter(i=>{if(l==="venda"&&i.tipo!=="Venda"&&i.tipo!=="Ambos"||l==="aluguel"&&i.tipo!=="Aluguel"&&i.tipo!=="Ambos"||l==="rascunho"&&i.ativo!==!1||l==="ativos"&&i.ativo===!1)return!1;if(m){const t=m.toLowerCase();return i.titulo.toLowerCase().includes(t)||i.endereco.toLowerCase().includes(t)||i.bairro?.toLowerCase().includes(t)}return!0}),u=[...o].filter(i=>(i.visualizacoes||0)>0).sort((i,t)=>(t.visualizacoes||0)-(i.visualizacoes||0)).slice(0,5),n={ate200k:o.filter(i=>i.preco<=2e5).length,de200a400k:o.filter(i=>i.preco>2e5&&i.preco<=4e5).length,de400a600k:o.filter(i=>i.preco>4e5&&i.preco<=6e5).length,acima600k:o.filter(i=>i.preco>6e5).length},y=Math.max(n.ate200k,n.de200a400k,n.de400a600k,n.acima600k);return w?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem",color:"#64748b"},children:"Carregando painel..."}):e.jsxs("div",{className:"container",style:{padding:"2rem 1rem",maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsx("h2",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"üìä Dashboard Administrativo"}),e.jsx("p",{style:{color:"#64748b",fontSize:"0.95rem"},children:"Vis√£o geral dos seus im√≥veis e estat√≠sticas"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsx("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,opacity:.9,fontSize:"0.875rem"},children:"Total de Im√≥veis"}),e.jsx("h3",{style:{margin:"0.5rem 0 0",fontSize:"2.5rem",fontWeight:700},children:a.totalImoveis})]}),e.jsx(T,{size:32,style:{opacity:.3}})]})}),e.jsx("div",{style:{background:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",color:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,opacity:.9,fontSize:"0.875rem"},children:"Ativos"}),e.jsx("h3",{style:{margin:"0.5rem 0 0",fontSize:"2.5rem",fontWeight:700},children:a.imoveisAtivos})]}),e.jsx(v,{size:32,style:{opacity:.3}})]})}),e.jsx("div",{style:{background:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",color:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,opacity:.9,fontSize:"0.875rem"},children:"Para Venda"}),e.jsx("h3",{style:{margin:"0.5rem 0 0",fontSize:"2.5rem",fontWeight:700},children:a.imoveisVenda})]}),e.jsx(z,{size:32,style:{opacity:.3}})]})}),e.jsx("div",{style:{background:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",color:"white",padding:"1.5rem",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("p",{style:{margin:0,opacity:.9,fontSize:"0.875rem"},children:"Para Aluguel"}),e.jsx("h3",{style:{margin:"0.5rem 0 0",fontSize:"2.5rem",fontWeight:700},children:a.imoveisAluguel})]}),e.jsx(S,{size:32,style:{opacity:.3}})]})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",padding:"1.5rem",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(F,{size:20,color:"#64748b"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#64748b"},children:"Novos (30 dias)"})]}),e.jsx("h3",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#1e293b"},children:a.cadastradosUltimos30Dias})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",padding:"1.5rem",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(q,{size:20,color:"#fbbf24"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#64748b"},children:"Em Destaque"})]}),e.jsx("h3",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:"#1e293b"},children:a.emDestaque})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",padding:"1.5rem",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(M,{size:20,color:"#64748b"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#64748b"},children:"Sem Fotos"})]}),e.jsx("h3",{style:{margin:0,fontSize:"2rem",fontWeight:700,color:a.semFoto>0?"#ef4444":"#10b981"},children:a.semFoto})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",padding:"1.5rem",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[e.jsx(N,{size:20,color:"#64748b"}),e.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"#64748b"},children:"Valor M√©dio"})]}),e.jsx("h3",{style:{margin:0,fontSize:"1.5rem",fontWeight:700,color:"#1e293b"},children:a.valorMedioVenda.toLocaleString("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0})})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(350px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},children:[e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",padding:"1.5rem",borderRadius:"12px"},children:[e.jsx("h3",{style:{margin:"0 0 1.5rem",fontSize:"1.1rem",color:"#1e293b"},children:"üí∞ Distribui√ß√£o por Faixa de Pre√ßo"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[{label:"At√© R$ 200mil",valor:n.ate200k,cor:"#22c55e"},{label:"R$ 200mil - R$ 400mil",valor:n.de200a400k,cor:"#3b82f6"},{label:"R$ 400mil - R$ 600mil",valor:n.de400a600k,cor:"#f59e0b"},{label:"Acima de R$ 600mil",valor:n.acima600k,cor:"#8b5cf6"}].map((i,t)=>e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.25rem"},children:[e.jsx("span",{style:{fontSize:"0.875rem",color:"#64748b"},children:i.label}),e.jsx("span",{style:{fontSize:"0.875rem",fontWeight:600,color:"#1e293b"},children:i.valor})]}),e.jsx("div",{style:{width:"100%",height:"8px",background:"#f1f5f9",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${y>0?i.valor/y*100:0}%`,height:"100%",background:i.cor,transition:"width 0.3s ease"}})})]},t))})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",padding:"1.5rem",borderRadius:"12px"},children:[e.jsx("h3",{style:{margin:"0 0 1.5rem",fontSize:"1.1rem",color:"#1e293b"},children:"üî• Im√≥veis Mais Visualizados"}),u.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:u.map((i,t)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem",background:t===0?"#fef3c7":"#f8fafc",borderRadius:"6px"},children:[e.jsx("span",{style:{fontWeight:700,fontSize:"1.25rem",color:t===0?"#f59e0b":"#64748b",minWidth:"24px"},children:t+1}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("p",{style:{margin:0,fontSize:"0.875rem",fontWeight:500,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i.titulo}),e.jsxs("p",{style:{margin:0,fontSize:"0.75rem",color:"#64748b"},children:[i.visualizacoes," visualiza√ß√µes"]})]})]},i.id))}):e.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem",fontStyle:"italic"},children:"Nenhuma visualiza√ß√£o registrada ainda"})]})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",padding:"1.5rem",borderRadius:"12px",marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[e.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["todos","ativos","venda","aluguel","rascunho"].map(i=>e.jsx("button",{onClick:()=>R(i),style:{padding:"0.5rem 1rem",borderRadius:"6px",border:"none",background:l===i?"var(--primary)":"#f1f5f9",color:l===i?"white":"#64748b",cursor:"pointer",fontSize:"0.875rem",fontWeight:500,textTransform:"capitalize",transition:"all 0.2s"},children:i==="todos"?"Todos":i==="ativos"?"Ativos":i},i))}),e.jsxs(b,{to:"/cadastro-imovel",className:"btn-details",style:{display:"inline-flex",alignItems:"center",gap:"8px",textDecoration:"none",background:"var(--primary)",color:"white",padding:"0.75rem 1.25rem",borderRadius:"8px",fontSize:"0.95rem",fontWeight:600},children:[e.jsx(P,{size:20})," Novo Im√≥vel"]})]}),e.jsxs("div",{style:{marginTop:"1rem",position:"relative"},children:[e.jsx($,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#94a3b8"}}),e.jsx("input",{type:"text",placeholder:"Buscar por t√≠tulo, endere√ßo ou bairro...",value:m,onChange:i=>D(i.target.value),style:{width:"100%",padding:"0.75rem 0.75rem 0.75rem 2.75rem",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"0.95rem",outline:"none"}})]})]}),e.jsxs("div",{style:{background:"white",border:"1px solid #e2e8f0",borderRadius:"12px",overflow:"hidden"},children:[e.jsx("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #e2e8f0",background:"#f8fafc"},children:e.jsxs("h3",{style:{margin:0,fontSize:"1.1rem",color:"#1e293b"},children:["üìã Lista de Im√≥veis (",g.length,")"]})}),e.jsxs("div",{style:{display:"grid",gap:"1px",background:"#e2e8f0"},children:[g.map(i=>e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem 1.5rem",opacity:i.ativo===!1?.6:1,background:i.ativo===!1?"#f8fafc":"white",borderLeft:i.ativo===!1?"4px solid #94a3b8":i.destaque?"4px solid #fbbf24":"4px solid #22c55e"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center",flex:1},children:[e.jsx("img",{src:i.imagens?.[0]||"https://via.placeholder.com/100x100?text=Sem+Foto",alt:"Capa",style:{width:"80px",height:"80px",objectFit:"cover",borderRadius:"8px",border:"2px solid #e2e8f0"}}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",marginBottom:"0.25rem"},children:[e.jsx("h4",{style:{margin:0,fontSize:"1rem",fontWeight:600},children:i.titulo}),i.destaque&&e.jsx("span",{style:{fontSize:"0.75rem",background:"#fbbf24",color:"#78350f",padding:"2px 8px",borderRadius:"4px",fontWeight:600},children:"‚≠ê DESTAQUE"})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#64748b",display:"flex",flexDirection:"column",gap:"4px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(z,{size:12})," ",i.tipo," ‚Ä¢",e.jsx(S,{size:12}),Number(i.preco).toLocaleString("pt-BR",{style:"currency",currency:"BRL",maximumFractionDigits:0})]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(U,{size:12})," ",i.endereco,i.bairro&&` - ${i.bairro}`]})]}),i.ativo===!1&&e.jsx("span",{style:{fontSize:"0.7rem",background:"#94a3b8",color:"white",padding:"3px 8px",borderRadius:"4px",marginTop:"6px",display:"inline-block",fontWeight:600},children:"RASCUNHO"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx(b,{to:`/editar/${i.id}`,title:"Editar",style:{background:"#eff6ff",border:"1px solid #dbeafe",padding:"10px",borderRadius:"8px",cursor:"pointer",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",transition:"all 0.2s"},children:e.jsx(O,{size:18})}),e.jsx("button",{onClick:()=>W(i.id,i.ativo??!0),title:i.ativo===!1?"Publicar":"Ocultar",style:{background:i.ativo===!1?"#f1f5f9":"#f0fdf4",border:i.ativo===!1?"1px solid #e2e8f0":"1px solid #bbf7d0",padding:"10px",borderRadius:"8px",cursor:"pointer",color:i.ativo===!1?"#64748b":"#16a34a",transition:"all 0.2s"},children:i.ativo===!1?e.jsx(H,{size:18}):e.jsx(v,{size:18})}),e.jsx("button",{onClick:()=>A(i.id),title:"Excluir",style:{background:"#fef2f2",border:"1px solid #fecaca",padding:"10px",borderRadius:"8px",cursor:"pointer",color:"#ef4444",transition:"all 0.2s"},children:e.jsx(Q,{size:18})})]})]},i.id)),g.length===0&&e.jsxs("div",{style:{textAlign:"center",padding:"3rem",color:"#94a3b8",background:"white"},children:[e.jsx("p",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},children:m?"üîç Nenhum im√≥vel encontrado com esse termo":"üì≠ Nenhum im√≥vel nesta categoria"}),e.jsx("p",{style:{fontSize:"0.9rem"},children:m?"Tente buscar por outro termo":'Clique em "Novo Im√≥vel" para come√ßar'})]})]})]})]})};export{X as Admin};
