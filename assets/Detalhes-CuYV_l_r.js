import{j as e,u as I,d as B}from"./index-CZpKUOUo.js";import{r as n,d as N,L as b}from"./vendor-DPpvCZNn.js";import{h as L,f as E}from"./firebase-mGLr8wx-.js";import{C as y,a as j,X as P,A as T,n as A,k as W,o as D,p as v,M as C,c as F,B as M,q as z,b as O,r as $,s as q}from"./icons-oDxEi2-m.js";const U=({images:i})=>{const[r,l]=n.useState(0),[x,c]=n.useState(!1),m=()=>{l(t=>(t+1)%i.length)},p=()=>{l(t=>(t-1+i.length)%i.length)},g=t=>{l(t),c(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{position:"relative",width:"100%",aspectRatio:"16 / 9",borderRadius:"12px",overflow:"hidden",background:"#f1f5f9",cursor:"pointer"},onClick:()=>g(r),children:[e.jsx("img",{src:i[r],alt:`Imagem ${r+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),i.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),p()},style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:e.jsx(y,{size:24,color:"#1e293b"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),m()},style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:e.jsx(j,{size:24,color:"#1e293b"})}),e.jsxs("div",{style:{position:"absolute",bottom:"1rem",right:"1rem",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:500},children:[r+1," / ",i.length]})]})]}),i.length>1&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"0.5rem",marginTop:"0.75rem",maxHeight:"100px",overflowX:"auto"},children:i.map((t,s)=>e.jsx("div",{onClick:()=>l(s),style:{aspectRatio:"1 / 1",borderRadius:"6px",overflow:"hidden",cursor:"pointer",border:r===s?"3px solid var(--primary)":"2px solid #e2e8f0",opacity:r===s?1:.6,transition:"all 0.2s"},children:e.jsx("img",{src:t,alt:`Miniatura ${s+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}})},s))})]}),x&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},onClick:()=>c(!1),children:[e.jsx("button",{onClick:()=>c(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1e4},children:e.jsx(P,{size:28,color:"#1e293b"})}),e.jsx("img",{src:i[r],alt:`Imagem ${r+1}`,style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",borderRadius:"8px"},onClick:t=>t.stopPropagation()}),i.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),p()},style:{position:"absolute",left:"2rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(y,{size:28,color:"#1e293b"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),m()},style:{position:"absolute",right:"2rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(j,{size:28,color:"#1e293b"})}),e.jsxs("div",{style:{position:"absolute",bottom:"2rem",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"25px",fontSize:"1rem",fontWeight:500},children:[r+1," / ",i.length]})]})]})]})},X=()=>{const{id:i}=N(),[r,l]=n.useState(null),[x,c]=n.useState(!0),[m,p]=n.useState(!1),{isAdmin:g}=I(),t="+5599991243054";n.useEffect(()=>{window.scrollTo(0,0),(async()=>{if(i)try{const a=await L(E(B,"imoveis",i));a.exists()&&l({id:a.id,...a.data()})}catch(a){console.error(a)}finally{c(!1)}})()},[i]),n.useEffect(()=>(r&&(document.title=`${r.titulo} | Lidiany Lopes Corretora`),()=>{document.title="Lidiany Lopes Corretora de Imóveis"}),[r]);const s=()=>{const o=window.location.href;navigator.share?navigator.share({title:r?.titulo,text:`Confira este imóvel: ${r?.titulo}`,url:o}):(navigator.clipboard.writeText(o),p(!0),setTimeout(()=>p(!1),2e3))};if(x)return e.jsx("div",{className:"container",style:{padding:"4rem",textAlign:"center"},children:"Carregando..."});if(!r)return e.jsx("div",{className:"container",children:"Imóvel não encontrado"});const S=r.imagens&&r.imagens.length>0?r.imagens:["https://via.placeholder.com/800x400?text=Sem+Foto"],k=`https://wa.me/${t}?text=Olá Lidiany! Vi o imóvel ${r.titulo.toUpperCase()} (Cód: ${i?.slice(0,6)}) e gostaria de mais informações.`,h=o=>{if(!o)return"";const a=o.toDate?o.toDate():new Date(o);return new Intl.DateTimeFormat("pt-BR",{dateStyle:"long"}).format(a)},u=r.atualizadoEm?r.atualizadoEm:r.criadoEm,w=r.atualizadoEm?"Atualizado em":"Publicado em",R=i?i.slice(0,6).toUpperCase():"",d=(o,a)=>o?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",background:"#f8fafc",border:"1px solid #e2e8f0",padding:"8px 16px",borderRadius:"20px",fontSize:"0.9rem",color:"#334155",fontWeight:500},children:[e.jsx(z,{size:16,color:"var(--success)"}),a]}):null,f=()=>e.jsxs("div",{className:"agent-card",style:{border:"1px solid #e2e8f0",borderRadius:"12px",padding:"1.5rem",background:"#fff"},children:[e.jsxs("div",{children:[e.jsxs("p",{style:{fontSize:"0.9rem",color:"#64748b",fontWeight:600,textTransform:"uppercase",marginBottom:"0.25rem"},children:["Valor de ",r.tipo]}),e.jsx("h2",{style:{color:"var(--primary)",fontSize:"2.5rem",fontWeight:800,margin:0},children:Number(r.preco).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),r.tipo==="Ambos"&&(r.precoAluguel??0)>0&&e.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px dashed #e2e8f0"},children:[e.jsx("p",{style:{fontSize:"0.8rem",color:"#64748b",marginBottom:"2px"},children:"OU ALUGUEL POR:"}),e.jsxs("p",{style:{fontSize:"1.5rem",fontWeight:700,color:"#16a34a"},children:[Number(r.precoAluguel).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:400},children:"/mês"})]})]}),(Number(r.condominio)>0||Number(r.iptu)>0)&&e.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"8px",margin:"1.5rem 0",fontSize:"0.9rem"},children:[Number(r.condominio)>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[e.jsxs("span",{style:{color:"#64748b",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(q,{size:14})," Condomínio"]}),e.jsx("strong",{style:{color:"#334155"},children:Number(r.condominio).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),Number(r.iptu)>0&&e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{style:{color:"#64748b",display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(C,{size:14})," IPTU (anual)"]}),e.jsx("strong",{style:{color:"#334155"},children:Number(r.iptu).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]}),e.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.jsxs("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"btn-whatsapp",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",background:"#25D366",color:"white",padding:"1rem",borderRadius:"8px",fontSize:"1.1rem",fontWeight:700,textDecoration:"none",boxShadow:"0 4px 6px rgba(37, 211, 102, 0.2)"},children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Chamar no WhatsApp"]})}),e.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center",fontSize:"0.85rem",color:"#64748b"},children:e.jsxs("div",{style:{display:"inline-flex",alignItems:"center",gap:"5px",background:"#f1f5f9",padding:"4px 10px",borderRadius:"12px"},children:[e.jsx(v,{size:14})," Resposta rápida"]})})]});return e.jsxs("div",{className:"detalhes-page",style:{background:"#fff",paddingBottom:"4rem"},children:[e.jsx("style",{children:`
        .details-layout {
          display: flex;
          gap: 2rem;
          margin-top: 2rem;
          align-items: flex-start;
        }
        
        /* Por padrão (PC), esconde o card que fica no meio do conteúdo */
        .mobile-price-container {
           display: none;
        }
        
        /* Por padrão (PC), mostra a sidebar */
        .desktop-sidebar {
           display: block;
        }

        /* Regras para Celular */
        @media (max-width: 768px) {
          .details-layout {
            flex-direction: column;
            gap: 1.5rem;
          }
          
          /* No celular, MOSTRA o card que está abaixo das fotos */
          .mobile-price-container {
             display: block;
             margin-top: 1.5rem;
             margin-bottom: 1rem;
          }

          /* No celular, ESCONDE a sidebar lateral (para não duplicar) */
          .desktop-sidebar {
             display: none;
          }

          .details-column-left {
             width: 100%;
          }
        }
      `}),e.jsxs("div",{className:"container",style:{padding:"2rem 1.5rem 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1.5rem"},children:[e.jsxs(b,{to:"/",style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#64748b"},children:[e.jsx(T,{size:20})," Voltar"]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsxs("button",{onClick:s,style:{display:"flex",alignItems:"center",gap:"5px",padding:"0.5rem 1rem",border:"1px solid #cbd5e1",borderRadius:"8px",background:"white",cursor:"pointer"},children:[e.jsx(A,{size:16})," ",m?"Copiado!":"Compartilhar"]}),g&&e.jsxs(b,{to:`/editar/${r.id}`,className:"btn-details",style:{width:"auto",background:"var(--secondary)",marginTop:0},children:[e.jsx(W,{size:16})," Editar"]})]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"12px",flexWrap:"wrap",alignItems:"center"},children:[e.jsx("span",{style:{background:"var(--primary)",color:"white",padding:"4px 12px",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold",textTransform:"uppercase"},children:r.tipo}),r.destaque&&e.jsx("span",{style:{background:"#fbbf24",color:"#92400e",padding:"4px 12px",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold",textTransform:"uppercase"},children:"Destaque"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",background:"#f1f5f9",color:"#475569",padding:"4px 12px",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"600",border:"1px solid #e2e8f0"},children:["Código: ",R]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:"2px",marginLeft:"auto"},children:[u&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.85rem",color:"#94a3b8"},children:[e.jsx(D,{size:14})," ",w," ",e.jsx("b",{children:h(u)})]}),r.criadoEm&&!r.atualizadoEm&&e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.85rem",color:"#94a3b8"},children:[e.jsx(v,{size:14})," Criado em"," ",e.jsx("b",{children:h(r.criadoEm)})]})]})]}),e.jsx("h1",{style:{fontSize:"2rem",color:"#1e293b",marginBottom:"0.5rem",lineHeight:1.2},children:r.titulo}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap",color:"#64748b"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[e.jsx(C,{size:18})," ",r.endereco," - ",r.bairro,","," ",r.cidade]})})]})]}),e.jsxs("div",{className:"container details-layout",children:[e.jsxs("div",{className:"details-column-left",style:{flex:2},children:[e.jsx(U,{images:S}),e.jsx("div",{className:"mobile-price-container",children:e.jsx(f,{})}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"1rem",margin:"2rem 0",padding:"1.5rem",background:"#f8fafc",borderRadius:"12px",border:"1px solid #f1f5f9"},children:[{icon:F,label:"Área Útil",val:`${r.area} m²`},{icon:M,label:"Quartos",val:r.quartos},{icon:z,label:"Suítes",val:r.suites||"-"},{icon:O,label:"Banheiros",val:r.banheiros},{icon:$,label:"Vagas",val:r.vagas||"-"}].map((o,a)=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(o.icon,{size:24,style:{color:"var(--primary)",marginBottom:"8px"}}),e.jsx("div",{style:{fontWeight:"700",color:"#334155",fontSize:"1.1rem"},children:o.val}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#94a3b8"},children:o.label})]},a))}),e.jsxs("div",{className:"description",style:{marginBottom:"3rem"},children:[e.jsx("h3",{style:{fontSize:"1.5rem",color:"#1e293b",marginBottom:"1rem"},children:"Sobre o imóvel"}),e.jsx("p",{style:{lineHeight:1.8,color:"#475569",whiteSpace:"pre-line",fontSize:"1.05rem"},children:r.descricao})]}),e.jsxs("div",{children:[e.jsx("h3",{style:{fontSize:"1.5rem",color:"#1e293b",marginBottom:"1rem"},children:"Diferenciais"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[d(r.piscina,"Piscina"),d(r.churrasqueira,"Churrasqueira"),d(r.elevador,"Elevador"),d(r.mobiliado,"Mobiliado"),d(r.portaria,"Portaria 24h"),d(r.aceitaPet,"Aceita Pet")]})]})]}),e.jsx("aside",{className:"desktop-sidebar",style:{flex:1,position:"sticky",top:"2rem",height:"fit-content"},children:e.jsx(f,{})})]})]})};export{X as Detalhes};
