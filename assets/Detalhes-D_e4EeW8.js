import{j as e,u as w,d as z}from"./index-ZyL3ABry.js";import{r as c,d as I,L as j}from"./vendor-DPpvCZNn.js";import{h as S,f as E}from"./firebase-DqZlsiQC.js";import{C as b,a as f,X as L,n as B,c as y,o as C,A as P,p as A,k as T,q as F,e as O,B as D,r as v,d as q,s as $}from"./icons-D6G6rgYq.js";const M=({images:a})=>{const[s,o]=c.useState(0),[p,d]=c.useState(!1),m=()=>{o(t=>(t+1)%a.length)},h=()=>{o(t=>(t-1+a.length)%a.length)},x=t=>{o(t),d(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsxs("div",{style:{position:"relative",width:"100%",aspectRatio:"16 / 9",borderRadius:"12px",overflow:"hidden",background:"#f1f5f9",cursor:"pointer"},onClick:()=>x(s),children:[e.jsx("img",{src:a[s],alt:`Imagem ${s+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),h()},style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:e.jsx(b,{size:24,color:"#1e293b"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),m()},style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 8px rgba(0,0,0,0.2)"},children:e.jsx(f,{size:24,color:"#1e293b"})}),e.jsxs("div",{style:{position:"absolute",bottom:"1rem",right:"1rem",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"0.5rem 1rem",borderRadius:"20px",fontSize:"0.875rem",fontWeight:500},children:[s+1," / ",a.length]})]})]}),a.length>1&&e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(80px, 1fr))",gap:"0.5rem",marginTop:"0.75rem",maxHeight:"100px",overflowX:"auto"},children:a.map((t,n)=>e.jsx("div",{onClick:()=>o(n),style:{aspectRatio:"1 / 1",borderRadius:"6px",overflow:"hidden",cursor:"pointer",border:s===n?"3px solid var(--primary)":"2px solid #e2e8f0",opacity:s===n?1:.6,transition:"all 0.2s"},children:e.jsx("img",{src:t,alt:`Miniatura ${n+1}`,style:{width:"100%",height:"100%",objectFit:"cover"}})},n))})]}),p&&e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.95)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem"},onClick:()=>d(!1),children:[e.jsx("button",{onClick:()=>d(!1),style:{position:"absolute",top:"1rem",right:"1rem",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1e4},children:e.jsx(L,{size:28,color:"#1e293b"})}),e.jsx("img",{src:a[s],alt:`Imagem ${s+1}`,style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",borderRadius:"8px"},onClick:t=>t.stopPropagation()}),a.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),h()},style:{position:"absolute",left:"2rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(b,{size:28,color:"#1e293b"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),m()},style:{position:"absolute",right:"2rem",top:"50%",transform:"translateY(-50%)",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"50%",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},children:e.jsx(f,{size:28,color:"#1e293b"})}),e.jsxs("div",{style:{position:"absolute",bottom:"2rem",background:"rgba(0, 0, 0, 0.7)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"25px",fontSize:"1rem",fontWeight:500},children:[s+1," / ",a.length]})]})]})]})},N=({imovel:a})=>{const o=`https://wa.me/+5599991243054?text=Olá Lidiany! Vi o imóvel ${a.titulo.toUpperCase()} (Cód: ${a.id?.slice(0,6).toUpperCase()}) e gostaria de mais informações.`;return e.jsxs("div",{className:"price-card",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"price-label",children:["Valor de ",a.tipo]}),e.jsx("h2",{className:"price-value",children:Number(a.preco).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),a.tipo==="Ambos"&&(a.precoAluguel??0)>0&&e.jsxs("div",{className:"rent-container",children:[e.jsx("p",{className:"rent-label",children:"OU ALUGUEL POR:"}),e.jsxs("p",{className:"rent-value",children:[Number(a.precoAluguel).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),e.jsx("span",{style:{fontSize:"0.9rem",fontWeight:400,color:"#64748b"},children:"/mês"})]})]}),(Number(a.condominio)>0||Number(a.iptu)>0)&&e.jsxs("div",{className:"extra-costs",children:[Number(a.condominio)>0&&e.jsxs("div",{className:"cost-row",children:[e.jsxs("span",{className:"cost-label",children:[e.jsx(B,{size:14})," Condomínio"]}),e.jsx("strong",{className:"cost-value",children:Number(a.condominio).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),Number(a.iptu)>0&&e.jsxs("div",{className:"cost-row",style:{marginTop:Number(a.condominio)>0?"8px":0},children:[e.jsxs("span",{className:"cost-label",children:[e.jsx(y,{size:14})," IPTU (anual)"]}),e.jsx("strong",{className:"cost-value",children:Number(a.iptu).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]}),e.jsx("div",{style:{display:"grid",gap:"1rem"},children:e.jsxs("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"btn-whatsapp",children:[e.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Chamar no WhatsApp"]})}),e.jsx("div",{className:"quick-reply-info",children:e.jsxs("div",{className:"reply-badge",children:[e.jsx(C,{size:14})," Resposta rápida"]})})]})},_=()=>{const{id:a}=I(),[s,o]=c.useState(null),[p,d]=c.useState(!0),[m,h]=c.useState(!1),{isAdmin:x}=w();c.useEffect(()=>{window.scrollTo(0,0),(async()=>{if(a)try{const i=await S(E(z,"imoveis",a));i.exists()&&o({id:i.id,...i.data()})}catch(i){console.error(i)}finally{d(!1)}})()},[a]);const t=()=>{const r=window.location.href;navigator.share?navigator.share({title:s?.titulo,text:`Confira este imóvel: ${s?.titulo}`,url:r}):(navigator.clipboard.writeText(r),h(!0),setTimeout(()=>h(!1),2e3))};if(p)return e.jsx("div",{className:"container",style:{padding:"4rem",textAlign:"center"},children:"Carregando..."});if(!s)return e.jsx("div",{className:"container",children:"Imóvel não encontrado"});const n=s.imagens&&s.imagens.length>0?s.imagens:["https://via.placeholder.com/800x400?text=Sem+Foto"],u=r=>{if(!r)return"";const i=r.toDate?r.toDate():new Date(r);return new Intl.DateTimeFormat("pt-BR",{dateStyle:"long"}).format(i)},g=s.atualizadoEm?s.atualizadoEm:s.criadoEm,R=s.atualizadoEm?"Atualizado em":"Publicado em",k=a?a.slice(0,6).toUpperCase():"",l=(r,i)=>r?e.jsxs("div",{className:"comodidade-badge",children:[e.jsx(v,{size:16,color:"var(--success)"}),i]}):null;return e.jsxs("div",{className:"detalhes-page",children:[e.jsxs("div",{className:"container detalhes-header-container",children:[e.jsxs("div",{className:"detalhes-nav-bar",children:[e.jsxs(j,{to:"/",className:"detalhes-back-link",children:[e.jsx(P,{size:20})," Voltar"]}),e.jsxs("div",{className:"detalhes-actions",children:[e.jsxs("button",{onClick:t,className:"btn-share",children:[e.jsx(A,{size:16})," ",m?"Copiado!":"Compartilhar"]}),x&&e.jsxs(j,{to:`/editar/${s.id}`,className:"btn-details",style:{width:"auto",background:"var(--secondary)",marginTop:0},children:[e.jsx(T,{size:16})," Editar"]})]})]}),e.jsxs("div",{style:{marginBottom:"2rem"},children:[e.jsxs("div",{className:"detalhes-tags-container",children:[e.jsx("span",{className:"tag-tipo",children:s.tipo}),s.destaque&&e.jsx("span",{className:"tag-destaque",children:"Destaque"}),e.jsxs("span",{className:"tag-codigo",children:["Código: ",k]}),e.jsxs("div",{className:"detalhes-dates",children:[g&&e.jsxs("span",{className:"date-info",children:[e.jsx(F,{size:14})," ",R," ",e.jsx("b",{children:u(g)})]}),s.criadoEm&&!s.atualizadoEm&&e.jsxs("span",{className:"date-info",children:[e.jsx(C,{size:14})," Criado em"," ",e.jsx("b",{children:u(s.criadoEm)})]})]})]}),e.jsx("h1",{className:"detalhes-title",children:s.titulo}),e.jsx("div",{className:"detalhes-location",children:e.jsxs("div",{className:"location-item",children:[e.jsx(y,{size:18})," ",s.endereco," - ",s.bairro,","," ",s.cidade]})})]})]}),e.jsxs("div",{className:"container details-layout",children:[e.jsxs("div",{className:"details-column-left",children:[e.jsx(M,{images:n}),e.jsx("div",{className:"mobile-price-container",children:e.jsx(N,{imovel:s})}),e.jsx("div",{className:"features-grid",children:[{icon:O,label:"Área Útil",val:`${s.area} m²`},{icon:D,label:"Quartos",val:s.quartos},{icon:v,label:"Suítes",val:s.suites||"-"},{icon:q,label:"Banheiros",val:s.banheiros},{icon:$,label:"Vagas",val:s.vagas||"-"}].map((r,i)=>e.jsxs("div",{className:"feature-item",children:[e.jsx(r.icon,{size:24,className:"feature-icon"}),e.jsx("div",{className:"feature-value",children:r.val}),e.jsx("div",{className:"feature-label",children:r.label})]},i))}),e.jsxs("div",{className:"description-section",children:[e.jsx("h3",{className:"section-title",children:"Sobre o imóvel"}),e.jsx("p",{className:"description-text",children:s.descricao})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"section-title",children:"Diferenciais"}),e.jsxs("div",{className:"comodidades-list",children:[l(s.piscina,"Piscina"),l(s.churrasqueira,"Churrasqueira"),l(s.elevador,"Elevador"),l(s.mobiliado,"Mobiliado"),l(s.portaria,"Portaria 24h"),l(s.aceitaPet,"Aceita Pet")]})]})]}),e.jsx("aside",{className:"desktop-sidebar",children:e.jsx(N,{imovel:s})})]})]})};export{_ as Detalhes};
