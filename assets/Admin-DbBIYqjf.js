import{j as e,d as o}from"./index-u0BA288P.js";import{r as l,L as c}from"./vendor-WiiANj4N.js";import{c as g,d as y,u as h,j as d,k as j}from"./firebase-C65ocEXe.js";import{P as b,D as v,M as E,e as z,E as S,f as k,g as w}from"./icons-CwlabZZT.js";const R=()=>{const[a,i]=l.useState([]),[p,x]=l.useState(!0),f=async()=>{try{const t=(await g(y(o,"imoveis"))).docs.map(r=>({id:r.id,...r.data()}));i(t)}catch(s){console.error("Erro ao buscar imóveis:",s)}finally{x(!1)}};l.useEffect(()=>{f()},[]);const m=async s=>{if(window.confirm("Tem certeza que deseja excluir? Essa ação é permanente."))try{await j(d(o,"imoveis",s)),i(a.filter(r=>r.id!==s))}catch(r){console.error("Erro ao excluir:",r),alert("Erro ao excluir.")}},u=async(s,t)=>{try{const r=!t;await h(d(o,"imoveis",s),{ativo:r}),i(a.map(n=>n.id===s?{...n,ativo:r}:n))}catch(r){console.error("Erro ao atualizar status:",r)}};return p?e.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"4rem",color:"#64748b"},children:"Carregando painel..."}):e.jsxs("div",{className:"container",style:{padding:"2rem 1rem"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:e.jsx("h2",{children:"Painel Administrativo"})}),e.jsxs(c,{to:"/cadastro-imovel",className:"btn-details",style:{display:"inline-flex",alignItems:"center",gap:"8px",marginBottom:"2rem",textDecoration:"none",background:"var(--primary)",color:"white"},children:[e.jsx(b,{size:20})," Adicionar Novo Imóvel"]}),e.jsxs("div",{className:"admin-grid",style:{display:"grid",gap:"1rem"},children:[a.map(s=>e.jsxs("div",{className:"card",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",opacity:s.ativo===!1?.6:1,background:s.ativo===!1?"#f1f5f9":"white",borderLeft:s.ativo===!1?"4px solid #94a3b8":"4px solid #22c55e"},children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"center"},children:[e.jsx("img",{src:s.imagens?.[0]||"https://via.placeholder.com/100",alt:"Capa",style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"}}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:0,fontSize:"1rem"},children:s.titulo}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#64748b",display:"flex",flexDirection:"column",gap:"2px",marginTop:"4px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(v,{size:12})," ",s.preco]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(E,{size:12})," ",s.endereco]})]}),s.ativo===!1&&e.jsx("span",{style:{fontSize:"0.7rem",background:"#94a3b8",color:"white",padding:"2px 6px",borderRadius:"4px",marginTop:"4px",display:"inline-block"},children:"RASCUNHO"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[e.jsx(c,{to:`/editar/${s.id}`,title:"Editar",style:{background:"none",border:"1px solid #e2e8f0",padding:"8px",borderRadius:"6px",cursor:"pointer",color:"#3b82f6",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(z,{size:20})}),e.jsx("button",{onClick:()=>u(s.id,s.ativo??!0),title:s.ativo===!1?"Publicar":"Ocultar",style:{background:"none",border:"1px solid #e2e8f0",padding:"8px",borderRadius:"6px",cursor:"pointer",color:s.ativo===!1?"#64748b":"#10b981"},children:s.ativo===!1?e.jsx(S,{size:20}):e.jsx(k,{size:20})}),e.jsx("button",{onClick:()=>m(s.id),title:"Excluir",style:{background:"#fee2e2",border:"none",padding:"8px",borderRadius:"6px",cursor:"pointer",color:"#ef4444"},children:e.jsx(w,{size:20})})]})]},s.id)),a.length===0&&e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:'Nenhum imóvel encontrado. Clique em "Adicionar" para começar.'})]})]})};export{R as Admin};
